trigger:
  batch: 'true'
  branches:
    include:
      - release/*

pool:
  vmImage: "macos-latest"

# Disable automatic Get Sources
resources:
  repositories:
    - repository: self
      type: git
      ref: $(Build.SourceBranch)
      clean: true   # ensures clean checkout

steps:
  - checkout: self   # manual checkout at the very start
    clean: true

  - template: ./templates/build.yml@self
    parameters:
      publishArtifactName: drop
      packageOffline: false
